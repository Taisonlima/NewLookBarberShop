<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Look Barber Shop</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #000, #2c2c2c);
    color: #f4d03f;
    text-align: center;
    padding: 40px;
  }

  h1 {
    font-size: 2.2em;
    color: #f4d03f;
    margin-bottom: 10px;
  }

  .subtext {
    color: #fefefe;
    font-size: 1.1em;
    margin-bottom: 30px;
  }

  input, button {
    padding: 10px;
    border: none;
    border-radius: 5px;
    font-size: 16px;
  }

  input[type="text"], input[type="password"] {
    width: 60%;
    margin: 5px auto;
    display: block;
  }

  button {
    cursor: pointer;
  }

  #addBtn {
    background-color: #f4d03f;
    color: #000;
    font-weight: bold;
  }

  #fila {
    margin-top: 30px;
    background: rgba(255,255,255,0.05);
    padding: 20px;
    border-radius: 10px;
  }

  .cliente {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
  }

  .btnConcluir {
    background: #f4d03f;
    color: #000;
    border: none;
    padding: 6px 12px;
    border-radius: 4px;
    cursor: pointer;
    display: inline-block;
  }

  footer {
    margin-top: 40px;
    color: #ccc;
    font-size: 0.9em;
  }
</style>
</head>
<body>

<h1>New Look Barber Shop üíà</h1>
<p class="subtext">
  ‚ÄúEstilo, precis√£o e atitude. Aqui o corte √© arte ‚Äî bem-vindo √† New Look Barber Shop.‚Äù<br>
  ‚ÄúCabelo no estilo, barba na r√©gua. Sua transforma√ß√£o come√ßa aqui.‚Äù
</p>

<div>
  <input id="nomeCliente" type="text" placeholder="Digite seu nome para entrar na fila" />
  <button id="addBtn">Entrar na fila</button>
</div>

<div id="fila"></div>

<div id="loginSection">
  <h3>√Årea do Barbeiro</h3>
  <input id="senha" type="password" placeholder="Digite a senha" />
  <button id="entrarBtn">Entrar</button>
</div>

<footer>
  üìç R. Vic√™ncia Francisca ‚Äì S√£o Caetano, pr√≥ximo √† quadra de S√£o Caetano<br>
  ¬© 2026 New Look Barber Shop ‚Äî Todos os direitos reservados.
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
  import { getDatabase, ref, push, onValue, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

  // üî• Configura√ß√£o Firebase
  const firebaseConfig = { 
    apiKey: "AIzaSyAOR0CZ3mFYSMIGGKheFUecnL16_UYDiuo",
    authDomain: "newlook-barbershop.firebaseapp.com",
    databaseURL: "https://newlook-barbershop-default-rtdb.firebaseio.com",
    projectId: "newlook-barbershop",
    storageBucket: "newlook-barbershop.firebasestorage.app",
    messagingSenderId: "358844729550",
    appId: "1:358844729550:web:81f7f4d47a499d9edaa89f",
    measurementId: "G-QVHRMRGQEN"
  };

  // üîß Inicializar Firebase
  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);
  const filaRef = ref(db, "fila");

  let barbeiroAtivo = false;
  const filaDiv = document.getElementById("fila");
  const addBtn = document.getElementById("addBtn");
  const entrarBtn = document.getElementById("entrarBtn");

  // üîÅ Renderizar fila
  function renderFila(data) {
    filaDiv.innerHTML = "<h2>Fila de Espera</h2>";

    if (!data) {
      filaDiv.innerHTML += "<p>Nenhum cliente na fila.</p>";
      return;
    }

    const clientes = Object.entries(data);
    clientes.forEach(([id, nome], index) => {
      const clienteDiv = document.createElement("div");
      clienteDiv.className = "cliente";
      clienteDiv.innerHTML = `<span>${index + 1}. ${nome}</span>`;

      if (barbeiroAtivo) {
        const btn = document.createElement("button");
        btn.className = "btnConcluir";
        btn.textContent = "Concluir";
        btn.onclick = () => remove(ref(db, "fila/" + id));
        clienteDiv.appendChild(btn);
      }

      filaDiv.appendChild(clienteDiv);
    });
  }

  // üî• Escutar atualiza√ß√µes em tempo real
  onValue(filaRef, snapshot => {
    renderFila(snapshot.val());
  });

  // ‚ûï Adicionar cliente
  addBtn.onclick = () => {
    const nome = document.getElementById("nomeCliente").value.trim();
    if (nome) {
      push(filaRef, nome);
      alert("Voc√™ entrou na fila! Aguarde seu atendimento üßî‚úÇÔ∏è");
      document.getElementById("nomeCliente").value = "";
    } else {
      alert("Por favor, digite seu nome.");
    }
  };

  // üîê Login barbeiro
  entrarBtn.onclick = () => {
    const senha = document.getElementById("senha").value.trim();
    if (senha === "0123") {
      barbeiroAtivo = true;
      alert("Modo barbeiro ativado!");
      // üîÅ Recarrega a lista para exibir os bot√µes ‚ÄúConcluir‚Äù
      onValue(filaRef, snapshot => renderFila(snapshot.val()), { onlyOnce: true });
    } else {
      alert("Senha incorreta!");
    }
  };
</script>
</body>
</html>
